#!/usr/bin/env sh

# BUG: THRE IS NO WAY TO SOURCE A FILE.
#      i3blocks does not even respect which environment
# that is running the script, always run with user default
# shell script.
# ANY VARS DECLARED IN ANOTHER SOURCE FILE WON'T WORK.
# . sys.conf

fa_clock_o='\U000f017'

hour_min=`date '+%T'`
sec=${hour_min##[0-9]*:}
hour_min=${hour_min%:*[0-9]}
color='#fdfefe'

DARK_GRAY="#17202a"
GRAY="#808080"
DEFAULT_COLOR="#53ff1a"
DEF_ICON_COLOR="$DEFAULT_COLOR"

#
# Bash interprets 08 and 09 as octal, so it raises the following error:
#     *sh: 08: value too great for base (error token is "08")*
# So the approach below forces to use base 10 %((10#...
#
if [ $((10#$sec % 2)) -eq 0 ]; then
	color="$DARK_GRAY"
else
	color="$DEFAULT_COLOR"
fi

echo -e "<span foreground='$DEF_ICON_COLOR' size='large'>$fa_clock_o</span>"\
	 "<span foreground='$DEFAULT_COLOR' size='large'>$hour_min</span><span foreground='$color' size='small'>:</span><span foreground='$DEFAULT_COLOR' size='x-small'>$sec </span>"

exit 0
